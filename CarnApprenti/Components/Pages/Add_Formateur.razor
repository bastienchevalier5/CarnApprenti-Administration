@page "/add_formateur"
@using Microsoft.AspNetCore.Components.Forms
@inject DatabaseService DatabaseService
@inject NavigationManager Navigation
@using static CarnApprenti.LivretApprentissageContext

<button class="btn btn-secondary" @onclick="GoBack">← Retour</button>

<h3 class="text-center mb-4">Ajouter un Formateur</h3>

<EditForm Model="newFormateur" OnValidSubmit="HandleAddFormateur">
    <DataAnnotationsValidator />
    <ValidationSummary class="text-danger mb-3" />

    <div class="mb-4">
        <label for="nom" class="form-label">Nom</label>
        <InputText id="nom" class="form-control" @bind-Value="newFormateur.Nom" placeholder="Entrez le nom du formateur" />
    </div>

    <div class="mb-4">
        <label for="prenom" class="form-label">Prénom</label>
        <InputText id="prenom" class="form-control" @bind-Value="newFormateur.Prenom" placeholder="Entrez le prénom du formateur" />
    </div>

    <div class="d-flex justify-content-center mb-4">
        <button type="submit" class="btn btn-primary btn-lg">Ajouter le Formateur</button>
    </div>
</EditForm>

@code {
    private Formateur newFormateur = new Formateur();

    private async Task HandleAddFormateur()
    {
        await DatabaseService.AddFormateurAsync(newFormateur);
        Navigation.NavigateTo("/formateurs/matieres"); // Retour à la page principale des formateurs et matières
    }

    private void GoBack()
    {
        Navigation.NavigateTo("/formateurs/matieres"); // Retour à la page principale des formateurs et matières
    }
}
